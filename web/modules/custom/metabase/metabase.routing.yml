metabase.settings:
  path: '/admin/config/services/metabase'
  defaults:
    _form: 'Drupal\metabase\Form\MetabaseSettingsForm'
    _title: 'Metabase API Settings'
  requirements:
    _permission: 'administer module reports'

metabase.dashboard:
  path: '/dashboard/{name}'
  defaults:
    _controller: '\Drupal\metabase\Controller\DashboardController::dashboard'
    _title: 'Analytics'
    name: null
  requirements:
    _access: 'TRUE'

metabase.proxy:
  path: '/proxy'
  defaults:
    _controller: '\Drupal\metabase\Controller\ProxyController::proxy'
    _title: 'Proxy'
  methods: [GET, POST, PUT, DELETE, HEAD, OPTIONS, PATCH]
  requirements:
    _access: 'TRUE'
  options:
    no_cache: 'TRUE'

metabase.proxy.path:
  path: '/proxy/{path}'
  defaults:
    _controller: '\Drupal\metabase\Controller\ProxyController::proxy'
    _title: 'Proxy'
  methods: [GET, POST, PUT, DELETE, HEAD, OPTIONS, PATCH]
  requirements:
     _access: 'TRUE'
  options:
    no_cache: 'TRUE'
    parameters:
      path:
        type: path

metabase.fonts.path:
  path: '/fonts/{path?}'
  defaults:
    _controller: '\Drupal\metabase\Controller\ProxyController::fonts'
    _title: 'Fonts'
    path: ''
  methods: [GET, POST, PUT, DELETE, HEAD, OPTIONS, PATCH]
  requirements:
    path: .+
    _access: 'TRUE'
  options:
    no_cache: 'TRUE'
    parameters:
      path:
        type: path
